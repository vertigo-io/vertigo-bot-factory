package io.vertigo.chatbot.designer.builder.documentaryResourceContext

create Task TkGetAllDocumentaryResourceContextIhmByDreId {
    className : "io.vertigo.basics.task.TaskEngineSelect"
    request : "
			SELECT 	drc.drc_id,
			        drc.dre_id,
					cva.cva_id,
					cpv.cpv_id,
					cva.label as cva_label,
					cpv.value as cpv_value
			from documentary_resource_context drc
			join context_value cva on (cva.cva_id = drc.cva_id)
			left join context_possible_value cpv on (cpv.cpv_id = drc.cpv_id)
			where drc.dre_id = #dreId#
			order by cva.label
             "

	in dreId  				          {domain : DoId         		                    cardinality : "1"  }
	out documentaryResourceContexts   {domain : DoDtDocumentaryResourceContextIhm	    cardinality : "*"  }
}

create Task TkRemoveAllDocumentaryResourceContextByDreId {
    className : "io.vertigo.basics.task.TaskEngineProc"
    request : "
            delete from documentary_resource_context
			where dre_id = #dreId#
             "
	in dreId  				{domain : DoId         		cardinality : "1"  }
}
