<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:vu="http://www.morphbit.com/thymeleaf/component"
        layout:decorate="~{templates/botDetailLayout}" th:with="nav=true, tab=welcometours"
>

<head>
    <title th:text="#{extensions.welcometour}"></title>
</head>

<body>
<section layout:fragment="content-actions">

</section>

<section layout:fragment="content">

    <div class="text-primary text-h6 text-weight-bold" th:text="#{layout.welcometours}"></div>

    <vu:include-data-primitive key="locale"/>
    <vu:include-data object="bot" field="botId" />
    <vu:popup-ajax action="_deleteWelcomeTour" vModel="showDeleteWelcomeTourPopup" th:message="#{extension.welcometour.delete.popup.message}"
                   th:confirm="#{action.delete}" dataName="welId" ></vu:popup-ajax>
    <vu:table id="WELCOMETOUR" th:title="#{extensions.welcometour}" list="welcomeTours" componentId="welcomeTours" sortBy="label" :binary-state-sort="true">
        <vu:slot name="top_right_slot">
            <q-btn color="primary" round icon="add" th:aria-label="#{action.add}" th:title="#{action.add}"
                   @click="vueData.newWelcomeTour.welId = null;
                       vueData.newWelcomeTour.botId = vueData.bot.botId;
                       vueData.newWelcomeTour.label = null;
                       vueData.newWelcomeTour.technicalCode = null ;
                       $refs.welcomeTourDialog.show()"></q-btn>
        </vu:slot>
        <vu:slot name="actions_slot">
            <q-btn class="on-right" round color="primary" icon="edit" th:aria-label="#{action.update}" th:title="#{action.update}"
                   @click="vueData.newWelcomeTour.botId = props.row.botId; vueData.newWelcomeTour.welId = props.row.welId; vueData.newWelcomeTour.label = props.row.label;
                       vueData.newWelcomeTour.technicalCode = props.row.technicalCode; $refs.welcomeTourDialog.show()"></q-btn>
            <q-btn class="on-right" round color="red" icon="delete" th:aria-label="#{action.delete}" th:title="#{action.delete}"
                   @click="componentStates.welId = props.row.welId; componentStates.showDeleteWelcomeTourPopup = true"></q-btn>
        </vu:slot>
        <vu:include-data object="welcomeTours" field="label" />
        <vu:include-data object="welcomeTours" field="welId" />
        <vu:include-data object="welcomeTours" field="botId" />
        <vu:include-data object="welcomeTours" field="technicalCode" />
        <vu:column field="label"/>
        <vu:column field="technicalCode"/>
    </vu:table>
    <q-dialog ref="welcomeTourDialog">
        <vu:include-data object="newWelcomeTour" field="botId" modifiable="true" />
        <vu:include-data object="newWelcomeTour" field="welId" modifiable="true" />
        <vu:include-data object="newWelcomeTour" field="label" modifiable="true" />
        <vu:include-data object="newWelcomeTour" field="technicalCode"  modifiable="true" />
        <q-card>
            <q-card-section>
                <div class="text-h6">
                    <span v-if="vueData.newWelcomeTour.welId !== null" th:text="#{extensions.welcometour.update.popup.title}"></span>
                    <span v-else th:text="#{extensions.welcometour.add.popup.title}"></span>
                </div>
            </q-card-section>
            <q-card-section>
                <input type="hidden" v-model="vueData.newWelcomeTour.welId" name="vContext[newWelcomeTour][welId]">
                <input type="hidden" v-model="vueData.newWelcomeTour.botId" name="vContext[newWelcomeTour][botId]">
                <q-input v-model="vueData.newWelcomeTour.label" th:label="#{extensions.welcometour.label}"
                         name="vContext[newWelcomeTour][label]" :error="hasFieldsError('newWelcomeTour', 'label')"
                         :error-message="getErrorMessage('newWelcomeTour', 'label')"  />
            </q-card-section>
            <q-card-section>
                <q-input v-model="vueData.newWelcomeTour.technicalCode" th:label="#{extensions.welcometour.technicalCode}"
                         name="vContext[newWelcomeTour][technicalCode]" :error="hasFieldsError('newWelcomeTour', 'technicalCode')"
                         :error-message="getErrorMessage('newWelcomeTour', 'technicalCode')" />
            </q-card-section>

            <q-card-actions align="around">
                <input type="hidden" name="CTX" :value="VertigoUi.vueData['CTX']">
                <q-btn th:label="#{action.cancel}" color="red" v-close-popup></q-btn>
                <q-btn th:title="#{action.save}" th:label="#{action.save}" th:aria-label="#{action.save}"
                       @click="httpPostAjax('_saveWelcomeTour', vueDataParams(['newWelcomeTour']))"
                       color="primary" v-close-popup></q-btn>
            </q-card-actions>
        </q-card>
    </q-dialog>
</section>
</body>
</html>